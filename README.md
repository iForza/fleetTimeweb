# üöú Farm Monitor Pro (Timeweb Edition)

**–°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å–µ–ª—å—Å–∫–æ—Ö–æ–∑—è–π—Å—Ç–≤–µ–Ω–Ω–æ–π —Ç–µ—Ö–Ω–∏–∫–∏**

---

## üì¶ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

- `index.html` ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (—É–º–Ω–∞—è –∫–∞—Ä—Ç–∞, –≥—Ä–∞—Ñ–∏–∫–∏, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏)
- `server.js` ‚Äî Express —Å–µ—Ä–≤–µ—Ä –¥–ª—è –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è —Å–∞–π—Ç–∞
- `package.json` ‚Äî –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ —Å–∫—Ä–∏–ø—Ç—ã
- `ecosystem.config.js` ‚Äî –∫–æ–Ω—Ñ–∏–≥ –¥–ª—è PM2 (–ø—Ä–æ–¥–∞–∫—à–Ω-–º–µ–Ω–µ–¥–∂–µ—Ä)
- `.gitignore` ‚Äî –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ —Å–ª—É–∂–µ–±–Ω—ã–µ —Ñ–∞–π–ª—ã

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (–ª–æ–∫–∞–ª—å–Ω–æ)

1. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Node.js (16+) –∏ npm**
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
   ```bash
   npm install
   ```
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä:
   ```bash
   npm start
   ```
4. –û—Ç–∫—Ä–æ–π—Ç–µ [http://localhost:3000](http://localhost:3000)

---

## üåê –î–µ–ø–ª–æ–π –Ω–∞ Timeweb VPS/Cloud

### 1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
```bash
git clone https://github.com/iForza/fleetTimeweb.git
cd fleetTimeweb
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Node.js, npm –∏ PM2
```bash
sudo apt update
sudo apt install -y nodejs npm git
sudo npm install -g pm2
```

### 3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```bash
npm install
```

### 4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —á–µ—Ä–µ–∑ PM2
```bash
pm run pm2:start
```

### 5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å
```bash
pm run pm2:logs
pm run pm2:monit
```

### 6. (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è) –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ PM2
```bash
pm2 startup
pm2 save
```

---

## üåç –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–æ–º–µ–Ω–∞ –∏ HTTPS (Nginx)

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Nginx:
   ```bash
   sudo apt install nginx
   ```
2. –°–æ–∑–¥–∞–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥ –¥–ª—è —Å–∞–π—Ç–∞ (–ø—Ä–∏–º–µ—Ä):
   ```nginx
   server {
       listen 80;
       server_name –í–ê–®_–î–û–ú–ï–ù;
       location / {
           proxy_pass http://127.0.0.1:3000;
           proxy_set_header Host $host;
           proxy_set_header X-Real-IP $remote_addr;
           proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
           proxy_set_header X-Forwarded-Proto $scheme;
       }
   }
   ```
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Nginx:
   ```bash
   sudo systemctl reload nginx
   ```
4. (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –ù–∞—Å—Ç—Ä–æ–π—Ç–µ HTTPS —á–µ—Ä–µ–∑ Certbot:
   ```bash
   sudo apt install snapd
   sudo snap install --classic certbot
   sudo certbot --nginx -d –í–ê–®_–î–û–ú–ï–ù
   ```

---

## üõ†Ô∏è –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

- –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫: `pm2 restart farm-monitor-pro`
- –û—Å—Ç–∞–Ω–æ–≤–∫–∞: `pm2 stop farm-monitor-pro`
- –£–¥–∞–ª–µ–Ω–∏–µ: `pm2 delete farm-monitor-pro`
- –õ–æ–≥–∏: `pm2 logs farm-monitor-pro`
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥: `pm2 monit`

---

## üìë –ö–æ–Ω—Ç–∞–∫—Ç—ã –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞

- [GitHub Issues](https://github.com/iForza/fleetTimeweb/issues)
- Email: support@fleetmonitor.ru

---

**–£–¥–∞—á–Ω–æ–≥–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞!**

## üìã –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–ö–∞—Ä—Ç–∞** - –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Ç–µ—Ö–Ω–∏–∫–∏ –Ω–∞ –∫–∞—Ä—Ç–µ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- **–ì—Ä–∞—Ñ–∏–∫–∏** - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö —Å —Ç–µ—Ö–Ω–∏–∫–∏ 
- **–ù–∞—Å—Ç—Ä–æ–π–∫–∏** - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ MQTT —Å–µ—Ä–≤–µ—Ä–æ–≤ –∏ –ø—Ä–æ—Ñ–∏–ª—è

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### MQTT –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—É–±–ª–∏—á–Ω—ã–µ MQTT –±—Ä–æ–∫–µ—Ä—ã:
  - `broker.emqx.io:8084` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
  - `broker.hivemq.com:8884`
  - –ò–ª–∏ –∫–∞—Å—Ç–æ–º–Ω—ã–π —Å–µ—Ä–≤–µ—Ä

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ç–æ–ø–∏–∫–∏
- `farm/+/data` - –î–∞–Ω–Ω—ã–µ —Å —Ç–µ—Ö–Ω–∏–∫–∏
- `car/+/data` - –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å –∞–≤—Ç–æ–º–æ–±–∏–ª—è–º–∏

### –§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö ESP32
```json
{
  "device_id": "tractor_001",
  "speed": 45.5,
  "temperature": 78.2,
  "fuel": 85,
  "load": 67,
  "latitude": 55.7558,
  "longitude": 37.6176,
  "timestamp": 1702888800000
}
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
Farm Monitor Pro/
‚îú‚îÄ‚îÄ index.html          # –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
‚îú‚îÄ‚îÄ styles.css          # –°—Ç–∏–ª–∏
‚îú‚îÄ‚îÄ js/
‚îÇ   ‚îî‚îÄ‚îÄ app.js          # –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞
‚îú‚îÄ‚îÄ package.json        # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞
‚îî‚îÄ‚îÄ README.md           # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## üåê –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **HTML5** - –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å—Ç—Ä–∞–Ω–∏—Ü
- **CSS3** - –°—Ç–∏–ª–∏–∑–∞—Ü–∏—è
- **JavaScript** - –õ–æ–≥–∏–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- **Leaflet** - –ö–∞—Ä—Ç—ã (–ø—Ä–æ—Å—Ç–∞—è –∏ —Å—Ç–∞–±–∏–ª—å–Ω–∞—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞)
- **Chart.js** - –ì—Ä–∞—Ñ–∏–∫–∏
- **MQTT.js** - MQTT –∫–ª–∏–µ–Ω—Ç

## üì± –°—Ç—Ä–∞–Ω–∏—Ü—ã

1. **Dashboard** - –ú–æ–¥—É–ª–∏ —Å–ª–µ–≤–∞, –∫–∞—Ä—Ç–∞ —Å–ø—Ä–∞–≤–∞
2. **Analytics** - –ì—Ä–∞—Ñ–∏–∫–∏ —Å –¥–∞–Ω–Ω—ã–º–∏ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –≤—Ä–µ–º–µ–Ω–∏
3. **Settings** - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ MQTT –∏ –ø—Ä–æ—Ñ–∏–ª—è

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

- MQTT —Å–µ—Ä–≤–µ—Ä: `broker.emqx.io:8084`
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö: –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥
- –Ø–∑—ã–∫: –†—É—Å—Å–∫–∏–π
- –¶–µ–Ω—Ç—Ä –∫–∞—Ä—Ç—ã: –ú–æ—Å–∫–≤–∞

## üêõ –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ö–∞—Ä—Ç–∞ –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ Leaflet CSS/JS –∑–∞–≥—Ä—É–∂–µ–Ω—ã

### MQTT –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è  
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ URL —Å–µ—Ä–≤–µ—Ä–∞
- –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥–æ–π –ø—É–±–ª–∏—á–Ω—ã–π –±—Ä–æ–∫–µ—Ä
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)

### –ì—Ä–∞—Ñ–∏–∫–∏ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ Chart.js –∑–∞–≥—Ä—É–∂–µ–Ω
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –µ—Å—Ç—å –¥–∞–Ω–Ω—ã–µ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–≤–æ–±–æ–¥–Ω–æ –¥–ª—è –ª—é–±—ã—Ö —Ü–µ–ª–µ–π.

---

**–í–µ—Ä—Å–∏—è:** 1.0 Simple  
**–ê–≤—Ç–æ—Ä:** iForza  
**–î–∞—Ç–∞:** 2025 